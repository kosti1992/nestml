<Lems>
    <Target component="sim1" />

    <Include file="Network.xml" />
    <Include file="iaf_cond_alpha_implicit.xml" />

    <Component id="iaf1" type="iaf_cond_alpha_implicit"/>
    <Component type="pulseGenerator" id="iA" delay="20ms" duration="180ms" amplitude="300pA"/>
    <Component id="syn1" type="testSynapse"/>

    <Component id="gen1" type="spikeGenerator" period="20ms"/>
    <Component id="gen2" type="spikeGenerator" period="30ms"/>

    <Network id="net1">
    	<Population id="p1" component="iaf1" size="1" />
    	<Population id="p2" component="iaf1" size="1" />
    	<Population id="g1" component="gen1" size="1" />
    	<Population id="g2" component="gen2" size="1" />

        <projection id="proj1" presynapticPopulation="g1" postsynapticPopulation="p1" synapse="syn1">
            <connection id="0" preCellId="../g1[0]" postCellId="../p1[0]" destination="spikeInh"/>
        </projection>
        
        <projection id="proj2" presynapticPopulation="g2" postsynapticPopulation="p2" synapse="syn1">
            <connection id="0" preCellId="../g2[0]" postCellId="../p2[0]" destination="spikeInh"/>
        </projection>

    </Network>


    <Include file="Simulation.xml" />
    
    <Simulation id="sim1" length="80ms" step="1ms" target="net1">
        <Display id="d0" title="pop 1" 
                 timeScale="1ms" xmin="-10" xmax="90" ymin="-90" ymax="60">
                  <Line id="izPhasicSpiking.V_m" quantity="p1[0]/V_m" scale="1mV" timeScale="1ms" color="#8CA8B8"/>
                <Line id="izPhasicSpiking.g_in" quantity="p1[0]/g_in" scale="0.001" timeScale="1ms" color="#5598E9"/>
                <Line id="izPhasicSpiking.g_ex" quantity="p1[0]/g_ex" scale="0.001" timeScale="1ms" color="#CDD9BB"/>
                <Line id="izPhasicSpiking.__D_g_in" quantity="p1[0]/__D_g_in" scale="0.001" timeScale="1ms" color="#CDD9BB"/>
                <Line id="izPhasicSpiking.__D_g_ex" quantity="p1[0]/__D_g_ex" scale="0.001" timeScale="1ms" color="#ff3f00"/>
                <Line id="izPhasicSpiking.r" quantity="p1[0]/r" scale="1" timeScale="1ms" color="#43c40b"/>
                <Line id="izPhasicSpiking.I_stim" quantity="p1[0]/I_stim" scale="0.01pA" timeScale="1ms" color="#146dfc"/>
                <Line id="izPhasicSpiking.spikeInh" quantity="p1[0]/spikeInh" scale="1" timeScale="1ms" color="#a46dfc"/>
                <Line id="izPhasicSpiking.spikeExc" quantity="p1[0]/spikeExc" scale="1" timeScale="1ms" color="#c46dfc"/>
        </Display>

           <Display id="d1" title="pop 2" 
                 timeScale="1ms" xmin="-10" xmax="90" ymin="-90" ymax="60">
                  <Line id="izPhasicSpiking.V_m" quantity="p2[0]/V_m" scale="1mV" timeScale="1ms" color="#8CA8B8"/>
                <Line id="izPhasicSpiking.g_in" quantity="p2[0]/g_in" scale="0.001" timeScale="1ms" color="#5598E9"/>
                <Line id="izPhasicSpiking.g_ex" quantity="p2[0]/g_ex" scale="0.001" timeScale="1ms" color="#CDD9BB"/>
                <Line id="izPhasicSpiking.__D_g_in" quantity="p2[0]/__D_g_in" scale="0.001" timeScale="1ms" color="#CDD9BB"/>
                <Line id="izPhasicSpiking.__D_g_ex" quantity="p2[0]/__D_g_ex" scale="0.001" timeScale="1ms" color="#ff3f00"/>
                <Line id="izPhasicSpiking.r" quantity="p2[0]/r" scale="1" timeScale="1ms" color="#43c40b"/>
                <Line id="izPhasicSpiking.I_stim" quantity="p2[0]/I_stim" scale="0.01pA" timeScale="1ms" color="#146dfc"/>
                <Line id="izPhasicSpiking.spikeInh" quantity="p2[0]/spikeInh" scale="1" timeScale="1ms" color="#a46dfc"/>
                <Line id="izPhasicSpiking.spikeExc" quantity="p2[0]/spikeExc" scale="1" timeScale="1ms" color="#c46dfc"/>
        </Display>
    </Simulation>
</Lems>
